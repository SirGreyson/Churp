<link rel="import" href="../bower_components/gold-email-input/gold-email-input.html">
<script src="../bower_components/firebase/firebase.js"></script>
<script src="../js/main.js"></script>

<dom-module id="email-input">

    <template>
        <email-validator></email-validator>
        <gold-email-input required error-message="Please enter a valid email address" label="email address"
                          bind-value="{{email}}">
            <iron-icon icon="mail" prefix></iron-icon>
        </gold-email-input>
    </template>

    <script>
        Polymer({
            is: 'email-input',

            behaviors: [
                Polymer.IronValidatableBehavior
            ],

            validate: function (values) {
                console.log(this.email);
                console.log(values);
                authorizeUser(this.email, '5w4a', true).then(function (success) {
//                    this.isValid = true;
                    return true;
                }, function (err) {
                    console.log(err);
//                    this.isValid = false;
                    return false;
                })
            },

            ready: function () {
                this.$.valid.validate = this.validate.bind(this);
            },

            properties: {
                email: {
                    type: String
                },
                isValid: {
                    notify: true,
                    type: Boolean,
                    value: true
                }
            }
        });
    </script>

</dom-module>